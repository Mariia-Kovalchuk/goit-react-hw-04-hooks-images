(this["webpackJsonpgoit-react-hw-04-hooks-images"]=this["webpackJsonpgoit-react-hw-04-hooks-images"]||[]).push([[0],{11:function(e,t,a){e.exports={ImageGalleryItem:"ImageGalleryItem_ImageGalleryItem__HK81A",ImageGalleryItemImage:"ImageGalleryItem_ImageGalleryItemImage__3TT-u"}},16:function(e,t,a){e.exports={Button:"Button_Button__37mpG"}},4:function(e,t,a){e.exports={Searchbar:"Searchbar_Searchbar__33-hi",SearchForm:"Searchbar_SearchForm__11k0g",SearchFormButton:"Searchbar_SearchFormButton__UVEjy",SearchFormButtonLabel:"Searchbar_SearchFormButtonLabel__1l2z3",SearchFormInput:"Searchbar_SearchFormInput__1ckXN","SearchForm-input":"Searchbar_SearchForm-input__3INw_"}},49:function(e,t,a){"use strict";a.r(t);var r=a(0),c=a.n(r),n=a(7),o=a.n(n),l=a(12),s=a(3),u=a(6),i=a.n(u),m=a(4),h=a.n(m),j=a(13),b=(a(25),a(26),a(1));var d=function(e){var t=e.onSubmit,a=Object(r.useState)(""),c=Object(s.a)(a,2),n=c[0],o=c[1];return Object(b.jsx)("header",{className:h.a.Searchbar,children:Object(b.jsxs)("form",{className:h.a.SearchForm,onSubmit:function(e){e.preventDefault(),""!==n.trim()?(t(n),o("")):Object(j.error)({text:"Please enter your search query!",delay:2e3})},children:[Object(b.jsx)("button",{type:"submit",className:h.a.SearchFormButton,children:Object(b.jsx)("span",{className:h.a.SearchFormButtonLabel,children:"Search"})}),Object(b.jsx)("input",{className:h.a.SearchFormInput,type:"text",placeholder:"Search images and photos",onChange:function(e){o(e.currentTarget.value.toLowerCase())},value:n})]})})};var O={fetchSearchQuery:function(e,t){return fetch("".concat("https://pixabay.com/api/","?image_type=photo&orientation=horizontal&q=").concat(e,"&page=").concat(t,"&per_page=12&key=").concat("21191808-b7f611822e153568a8c55fc05")).then((function(e){return e.ok?e.json():Promise.reject(new Error("No match found. Please check your query!"))}))}},p=a(11),f=a.n(p);function y(e){var t=e.img,a=t.webformatURL,r=t.largeImageURL,c=e.onClick;return Object(b.jsx)("li",{className:f.a.ImageGalleryItem,children:Object(b.jsx)("img",{src:a,alt:"",className:f.a.ImageGalleryItemImage,onClick:c,"data-source":r})})}var g=a(14),_=a(15),S=a(19),I=a(18),v=a(9),x=a.n(v),k=document.querySelector("#modal-root"),w=function(e){Object(S.a)(a,e);var t=Object(I.a)(a);function a(){var e;Object(g.a)(this,a);for(var r=arguments.length,c=new Array(r),n=0;n<r;n++)c[n]=arguments[n];return(e=t.call.apply(t,[this].concat(c))).handleKeyDown=function(t){"Escape"===t.code&&e.props.onClose()},e.handleBackdropClick=function(t){t.currentTarget===t.target&&e.props.onClose()},e}return Object(_.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyDown)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeyDown)}},{key:"render",value:function(){return Object(n.createPortal)(Object(b.jsx)("div",{className:x.a.Overlay,onClick:this.handleBackdropClick,children:Object(b.jsx)("div",{className:x.a.Modal,children:Object(b.jsx)("img",{className:x.a.Img,src:this.props.url,alt:""})})}),k)}}]),a}(r.Component),N=a(16),C=a.n(N),B=function(e){var t=e.onClick;return Object(b.jsx)("button",{type:"button",className:C.a.Button,onClick:t,children:" Load More"})},G=a(17),F=a.n(G),L=(a(48),"idle"),E="pending",M="resolved",q="rejected";var Q=function(){var e=Object(r.useState)(""),t=Object(s.a)(e,2),a=t[0],c=t[1],n=Object(r.useState)(1),o=Object(s.a)(n,2),u=o[0],m=o[1],h=Object(r.useState)(L),j=Object(s.a)(h,2),p=j[0],f=j[1],g=Object(r.useState)([]),_=Object(s.a)(g,2),S=_[0],I=_[1],v=Object(r.useState)(!1),x=Object(s.a)(v,2),k=x[0],N=x[1],C=Object(r.useState)(null),G=Object(s.a)(C,2),Q=G[0],T=G[1],D=Object(r.useState)(null),P=Object(s.a)(D,2),K=P[0],U=P[1],z=Object(r.useState)(null),H=Object(s.a)(z,2),A=H[0],J=H[1];Object(r.useEffect)((function(){if(a){O.fetchSearchQuery(a,u).then((function(e){I((function(t){return[].concat(Object(l.a)(t),Object(l.a)(e.hits))})),f(M),U(e.total)})).catch((function(e){J(e),f(q)})).finally((function(){return window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})})),f(E)}}),[a,u]);var R=function(){N(!k)},V=function(e){e.currentTarget===e.target&&(!function(e){T(e)}(e.target.dataset.source),R())};return Object(b.jsxs)("div",{children:[Object(b.jsx)(d,{onSubmit:function(e){c(e),m(1),I([])}}),"pending"===p&&Object(b.jsx)(F.a,{className:i.a.Loader,type:"Circles",color:"#3f51b5",height:100,width:100,timeout:5e3}),Object(b.jsx)("div",{children:"resolved"===p&&S.length>0&&Object(b.jsxs)("div",{children:[Object(b.jsx)("ul",{className:i.a.ImageGallery,children:S.map((function(e){return Object(b.jsx)(y,{onClick:V,img:e},e.id)}))}),K>12*u&&Object(b.jsx)(B,{onClick:function(){m((function(e){return e+1}))}}),k&&Object(b.jsx)(w,{onClose:R,url:Q})]})}),"resolved"===p&&!S.length&&Object(b.jsx)("p",{className:i.a.ErrorQuery,children:"No match found. Please check your query!"}),"rejected"===p&&Object(b.jsx)("p",{className:i.a.ErrorQuery,children:A.message})]})},T=function(){return Object(b.jsx)(Q,{})};o.a.render(Object(b.jsx)(c.a.StrictMode,{children:Object(b.jsx)(T,{})}),document.getElementById("root"))},6:function(e,t,a){e.exports={ImageGallery:"ImageGallery_ImageGallery__LBHuI",ErrorQuery:"ImageGallery_ErrorQuery__12dmj",Loader:"ImageGallery_Loader__1VuSq"}},9:function(e,t,a){e.exports={Overlay:"Modal_Overlay__3wqoS",Modal:"Modal_Modal__2fOfz",Img:"Modal_Img__2cCyB"}}},[[49,1,2]]]);
//# sourceMappingURL=main.abcd932d.chunk.js.map