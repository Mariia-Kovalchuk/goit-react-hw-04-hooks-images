{"version":3,"sources":["ImageGalleryItem/ImageGalleryItem.module.css","Button/Button.module.css","Searchbar/Searchbar.module.css","Searchbar/Searchbar.js","apiSearchService.js","ImageGalleryItem/ImageGalleryItem.js","Modal/Modal.js","Button/Button.js","ImageGallery/ImageGallery.js","App.js","index.js","ImageGallery/ImageGallery.module.css","Modal/Modal.module.css"],"names":["module","exports","Searchbar","onSubmit","useState","searchQuery","setSearchQuery","className","styles","SearchForm","event","preventDefault","trim","error","text","delay","type","SearchFormButton","SearchFormButtonLabel","SearchFormInput","placeholder","onChange","currentTarget","value","toLowerCase","api","fetchSearchQuery","page","fetch","then","response","ok","json","Promise","reject","Error","ImageGalleryItem","img","webformatURL","largeImageURL","onClick","style","src","alt","ImageGalleryItemImage","modalRoot","document","querySelector","Modal","handleKeyDown","e","code","props","onClose","handleBackdropClick","target","window","addEventListener","this","removeEventListener","createPortal","Overlay","Img","url","Component","Button","Status","ImageGallery","setPage","status","setStatus","searchQueryResult","setSearchQueryResult","showModal","setShowModal","modalImgUrl","setModalImgUrl","total","setTotal","setError","useEffect","apiSearchService","prevState","hits","catch","finally","scrollTo","top","documentElement","scrollHeight","behavior","toggleModal","handleImgClick","handleImgURL","dataset","source","Loader","color","height","width","timeout","length","map","id","ErrorQuery","message","App","ReactDOM","render","StrictMode","getElementById"],"mappings":"wIACAA,EAAOC,QAAU,CAAC,iBAAmB,2CAA2C,sBAAwB,kD,mBCAxGD,EAAOC,QAAU,CAAC,OAAS,yB,kBCA3BD,EAAOC,QAAU,CAAC,UAAY,6BAA6B,WAAa,8BAA8B,iBAAmB,oCAAoC,sBAAwB,yCAAyC,gBAAkB,mCAAmC,mBAAmB,sC,uJCmDvRC,MA3Cf,YAAgC,IAAZC,EAAW,EAAXA,SAEhB,EAAsCC,mBAAS,IAA/C,mBAAOC,EAAP,KAAoBC,EAApB,KAsBA,OACI,wBAAQC,UAAWC,IAAON,UAA1B,SACI,uBAAMK,UAAWC,IAAOC,WAAYN,SAlBvB,SAAAO,GACjBA,EAAMC,iBAEqB,KAAvBN,EAAYO,QAQhBT,EAASE,GACTC,EAAe,KARXO,gBAAM,CACFC,KAAM,kCACNC,MAAO,OAYX,UACI,wBAAQC,KAAK,SAAST,UAAWC,IAAOS,iBAAxC,SACI,sBAAMV,UAAWC,IAAOU,sBAAxB,sBAGJ,uBACIX,UAAWC,IAAOW,gBAClBH,KAAK,OACLI,YAAY,2BACZC,SA/BgB,SAAAX,GAC5BJ,EAAeI,EAAMY,cAAcC,MAAMC,gBA+B7BD,MAAOlB,UC9B3B,IAIeoB,EAJH,CACVC,iBAZF,SAA2BrB,EAAasB,GACpC,OAAOC,MAAM,GAAD,OAJC,2BAID,sDAA0DvB,EAA1D,iBAA8EsB,EAA9E,4BAHA,uCAIPE,MAAK,SAAAC,GACV,OAAIA,EAASC,GACFD,EAASE,OAGbC,QAAQC,OAAO,IAAIC,MAAJ,kD,iBCNX,SAASC,EAAT,GAA6E,IAAD,IAAhDC,IAAOC,EAAyC,EAAzCA,aAAcC,EAA2B,EAA3BA,cAAiBC,EAAU,EAAVA,QAC/E,OACC,oBAAIjC,UAAWkC,IAAML,iBAArB,SACD,qBAAKM,IAAKJ,EAAcK,IAAI,GAAGpC,UAAWkC,IAAMG,sBAAuBJ,QAASA,EAAS,cAAaD,M,oDCHlGM,EAAYC,SAASC,cAAc,eAEpBC,E,4MASnBC,cAAgB,SAAAC,GACC,WAAXA,EAAEC,MACJ,EAAKC,MAAMC,W,EAIfC,oBAAsB,SAAA5C,GAChBA,EAAMY,gBAAkBZ,EAAM6C,QAChC,EAAKH,MAAMC,W,uDAhBf,WACEG,OAAOC,iBAAiB,UAAWC,KAAKT,iB,kCAG1C,WACEO,OAAOG,oBAAoB,UAAWD,KAAKT,iB,oBAe7C,WACI,OAAOW,uBACH,qBAAKrD,UAAWkC,IAAMoB,QAASrB,QAASkB,KAAKJ,oBAA7C,SACI,qBAAK/C,UAAWkC,IAAMO,MAAtB,SACI,qBAAKzC,UAAWkC,IAAMqB,IAAKpB,IAAKgB,KAAKN,MAAMW,IAAKpB,IAAI,SAG5DE,O,GA5ByBmB,a,iBCKpBC,EARA,SAAC,GAAiB,IAAfzB,EAAc,EAAdA,QACd,OACI,wBAAQxB,KAAK,SAAST,UAAWkC,IAAMwB,OAAQzB,QAASA,EAAxD,yB,iBCIF0B,G,MACE,QADFA,EAEK,UAFLA,EAGM,WAHNA,EAIM,WA8GGC,MA3Gf,WAEI,MAAsC/D,mBAAS,IAA/C,mBAAOC,EAAP,KAAoBC,EAApB,KACA,EAAwBF,mBAAS,GAAjC,mBAAOuB,EAAP,KAAayC,EAAb,KACA,EAA4BhE,mBAAS8D,GAArC,mBAAOG,EAAP,KAAeC,EAAf,KACA,EAAkDlE,mBAAS,IAA3D,mBAAOmE,EAAP,KAA0BC,EAA1B,KACA,EAAkCpE,oBAAS,GAA3C,mBAAOqE,EAAP,KAAkBC,EAAlB,KACA,EAAsCtE,mBAAS,MAA/C,mBAAOuE,EAAP,KAAoBC,EAApB,KACA,EAA0BxE,mBAAS,MAAnC,mBAAOyE,EAAP,KAAcC,EAAd,KACA,EAA0B1E,mBAAS,MAAnC,mBAAOS,EAAP,KAAckE,EAAd,KAIAC,qBAAU,WACN,GAAK3E,EAAL,CAKI4E,EACKvD,iBAAiBrB,EAAasB,GAC9BE,MAAK,SAAA0C,GACFC,GAAqB,SAAAU,GAAS,4BAAQA,GAAR,YAAsBX,EAAkBY,UACtEb,EAAUJ,GACVY,EAASP,EAAkBM,UAE9BO,OAAM,SAAAvE,GACHkE,EAASlE,GACTyD,EAAUJ,MAEbmB,SAAQ,kBAAM7B,OAAO8B,SAAS,CAC3BC,IAAKzC,SAAS0C,gBAAgBC,aAC9BC,SAAU,cAMtBpB,EAAUJ,MAEX,CAAC7D,EAAYsB,IAIhB,IAMMgE,EAAc,WAChBjB,GAAcD,IAOZmB,EAAiB,SAAAlF,GACfA,EAAMY,gBAAkBZ,EAAM6C,UALjB,SAAAoB,GACjBC,EAAeD,GAMXkB,CADsBnF,EAAM6C,OAAOuC,QAAQC,QAE3CJ,MASR,OACQ,gCACI,cAAE,EAAF,CAAYxF,SA7BC,SAAAE,GACrBC,EAAeD,GACf+D,EAAQ,GACRI,EAAqB,OA4BD,YAAXH,GAAwB,cAAC,IAAD,CAAQ9D,UAAWC,IAAOwF,OAAQhF,KAAK,UAAUiF,MAAM,UAAUC,OAAQ,IAAKC,MAAO,IAAKC,QAAS,MAE5H,8BACgB,aAAX/B,GAAyBE,EAAkB8B,OAAS,GACjD,gCACI,oBAAI9F,UAAWC,IAAO2D,aAAtB,SACKI,EAAkB+B,KAAI,SAAAjE,GAAG,OACtB,cAACD,EAAD,CAAkBI,QAASoD,EAA6BvD,IAAKA,GAAbA,EAAIkE,SAI3D1B,EAAqB,IAAZlD,EAAO,IAAY,cAAC,EAAD,CAAQa,QAnBxC,WACf4B,GAAQ,SAACc,GAAD,OAAeA,EAAY,QAoBhBT,GAAa,cAAC,EAAD,CAAOpB,QAASsC,EAAa5B,IAAKY,SAKhD,aAAXN,IAA0BE,EAAkB8B,QACzC,mBAAG9F,UAAWC,IAAOgG,WAArB,sDAEQ,aAAXnC,GAAyB,mBAAG9D,UAAWC,IAAOgG,WAArB,SAAkC3F,EAAM4F,cCtGnEC,EANH,WACR,OACI,cAAE,EAAF,KCFRC,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEF/D,SAASgE,eAAe,U,kBCR1B9G,EAAOC,QAAU,CAAC,aAAe,mCAAmC,WAAa,iCAAiC,OAAS,+B,kBCA3HD,EAAOC,QAAU,CAAC,QAAU,uBAAuB,MAAQ,qBAAqB,IAAM,sB","file":"static/js/main.0278d93b.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGalleryItem\":\"ImageGalleryItem_ImageGalleryItem__HK81A\",\"ImageGalleryItemImage\":\"ImageGalleryItem_ImageGalleryItemImage__3TT-u\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"Button_Button__37mpG\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar__33-hi\",\"SearchForm\":\"Searchbar_SearchForm__11k0g\",\"SearchFormButton\":\"Searchbar_SearchFormButton__UVEjy\",\"SearchFormButtonLabel\":\"Searchbar_SearchFormButtonLabel__1l2z3\",\"SearchFormInput\":\"Searchbar_SearchFormInput__1ckXN\",\"SearchForm-input\":\"Searchbar_SearchForm-input__3INw_\"};","import { useState } from 'react';\r\nimport styles from './Searchbar.module.css';\r\nimport { error } from \"@pnotify/core\";\r\nimport \"@pnotify/core/dist/PNotify.css\";\r\nimport \"@pnotify/core/dist/BrightTheme.css\";\r\nimport PropTypes from 'prop-types';\r\n\r\n\r\n\r\nfunction Searchbar({onSubmit}) {\r\n    \r\n    const [searchQuery, setSearchQuery] = useState('');\r\n\r\n    const handleSearchQueryChange = event => {\r\n        setSearchQuery(event.currentTarget.value.toLowerCase())\r\n    };\r\n\r\n    const handleSubmit = event => {\r\n        event.preventDefault();\r\n\r\n        if (searchQuery.trim() === '') {\r\n            error({\r\n                text: \"Please enter your search query!\",\r\n                delay: 2000,\r\n            });\r\n            return\r\n        };\r\n\r\n        onSubmit(searchQuery);\r\n        setSearchQuery('')\r\n        \r\n    };\r\n\r\n    return (\r\n        <header className={styles.Searchbar}>\r\n            <form className={styles.SearchForm} onSubmit={handleSubmit}>\r\n                <button type=\"submit\" className={styles.SearchFormButton}>\r\n                    <span className={styles.SearchFormButtonLabel}>Search</span>\r\n                </button>\r\n\r\n                <input\r\n                    className={styles.SearchFormInput}\r\n                    type=\"text\"\r\n                    placeholder=\"Search images and photos\"\r\n                    onChange={handleSearchQueryChange}\r\n                    value={searchQuery}\r\n                />\r\n            </form>\r\n        </header>\r\n    );\r\n}\r\n\r\nexport default Searchbar;\r\n\r\nSearchbar.propTypes = {\r\n    onSubmit: PropTypes.func.isRequired\r\n}","// с дефолтным экспортом объекта отвечающего за логику HTTP-запросов к API\r\nconst BASE_URL = 'https://pixabay.com/api/';\r\nconst API_KEY = '21191808-b7f611822e153568a8c55fc05';\r\n\r\nfunction fetchSearchQuery( searchQuery, page ) {\r\n    return fetch(`${BASE_URL}?image_type=photo&orientation=horizontal&q=${searchQuery}&page=${page}&per_page=12&key=${API_KEY}`)\r\n        .then(response => {\r\n    if (response.ok) {\r\n        return response.json();\r\n            };\r\n\r\n    return Promise.reject(new Error(`No match found. Please check your query!`));\r\n  });\r\n}\r\n\r\nconst api = {\r\n  fetchSearchQuery,\r\n};\r\n\r\nexport default api;\r\n\r\n\r\n\r\n// export default class ApiService {\r\n//     constructor() {\r\n//     this.searchQuery = '';\r\n//         this.page = 1;\r\n//         this.total = 0;\r\n//     }\r\n\r\n//     search() {\r\n        \r\n//         return fetch(`${BASE_URL}?image_type=photo&orientation=horizontal&q=${this.searchQuery}&page=${this.page}&per_page=12&key=${API_KEY}`)\r\n//             .then(response => response.json())\r\n//             .then(({ hits, total }) => {\r\n//                 this.total = total;\r\n//                 return hits;\r\n//             }\r\n//             );\r\n//     }\r\n\r\n\r\n//     set query(newQuery) {\r\n//         this.searchQuery = newQuery;\r\n//     }\r\n\r\n\r\n//     incrementPage() {\r\n//         this.page+=1;\r\n//     }\r\n\r\n//     resetPage() {\r\n//     this.page = 1;\r\n//   }\r\n\r\n\r\n    \r\n// }","import style from './ImageGalleryItem.module.css'\r\nimport PropTypes from 'prop-types';\r\n\r\n\r\n\r\nexport default function ImageGalleryItem({ img: { webformatURL, largeImageURL }, onClick}) {\r\n  return (\r\n   <li className={style.ImageGalleryItem}>\r\n  <img src={webformatURL} alt=\"\" className={style.ImageGalleryItemImage} onClick={onClick} data-source={largeImageURL} />\r\n</li>\r\n  );\r\n}\r\n\r\nImageGalleryItem.propTypes = {\r\n  onClick: PropTypes.func.isRequired,\r\n  webformatURL: PropTypes.string,\r\n  largeImageURL: PropTypes.string,\r\n  img: PropTypes.object.isRequired\r\n  \r\n}","import React, { Component } from 'react';\r\nimport { createPortal } from 'react-dom';\r\nimport style from './Modal.module.css';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst modalRoot = document.querySelector('#modal-root');\r\n\r\nexport default class Modal extends Component {\r\n  componentDidMount() {\r\n    window.addEventListener('keydown', this.handleKeyDown);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener('keydown', this.handleKeyDown);\r\n  }\r\n\r\n  handleKeyDown = e => {\r\n    if (e.code === 'Escape') {\r\n      this.props.onClose();\r\n    }\r\n  };\r\n\r\n  handleBackdropClick = event => {\r\n    if (event.currentTarget === event.target) {\r\n      this.props.onClose();\r\n    }\r\n  };\r\n\r\n  render() {\r\n      return createPortal(\r\n          <div className={style.Overlay} onClick={this.handleBackdropClick}>\r\n              <div className={style.Modal}>\r\n                  <img className={style.Img} src={this.props.url} alt=\"\"  />\r\n              </div>\r\n          </div>,\r\n          modalRoot,\r\n      );\r\n  }\r\n}\r\n\r\nModal.propTypes = {\r\n  onClose: PropTypes.func.isRequired,\r\n  url: PropTypes.string.isRequired\r\n\r\n}\r\n\r\n\r\n","import style from './Button.module.css';\r\nimport PropTypes from 'prop-types';\r\n\r\n\r\nconst Button = ({ onClick }) => {\r\n    return (\r\n        <button type=\"button\" className={style.Button} onClick={onClick} > Load More\r\n        </button>\r\n        \r\n    );\r\n}\r\n\r\nexport default Button\r\n\r\nButton.propTypes = {\r\n    onClick: PropTypes.func.isRequired,\r\n}","import React, {useState, useEffect} from 'react';\r\nimport styles from './ImageGallery.module.css';\r\nimport Searchbar from '../Searchbar';\r\nimport apiSearchService from '../apiSearchService';\r\nimport ImageGalleryItem from '../ImageGalleryItem';\r\nimport Modal from '../Modal';\r\nimport Button from '../Button';\r\nimport Loader from \"react-loader-spinner\";\r\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\r\n\r\nconst Status = {\r\n  IDLE: 'idle',\r\n  PENDING: 'pending',\r\n  RESOLVED: 'resolved',\r\n  REJECTED: 'rejected',\r\n};\r\n\r\nfunction ImageGallery() {\r\n    \r\n    const [searchQuery, setSearchQuery] = useState('');\r\n    const [page, setPage] = useState(1);\r\n    const [status, setStatus] = useState(Status.IDLE);\r\n    const [searchQueryResult, setSearchQueryResult] = useState([]);\r\n    const [showModal, setShowModal] = useState(false);\r\n    const [modalImgUrl, setModalImgUrl] = useState(null);\r\n    const [total, setTotal] = useState(null);\r\n    const [error, setError] = useState(null);\r\n\r\n\r\n\r\n    useEffect(() => {\r\n        if (!searchQuery) {\r\n            return;\r\n        };\r\n        \r\n        const fetchSearchQuery = () => {\r\n            apiSearchService\r\n                .fetchSearchQuery(searchQuery, page)\r\n                .then(searchQueryResult => {\r\n                    setSearchQueryResult(prevState => [...prevState, ...searchQueryResult.hits]);\r\n                    setStatus(Status.RESOLVED);\r\n                    setTotal(searchQueryResult.total);\r\n                })\r\n                .catch(error => {\r\n                    setError(error);\r\n                    setStatus(Status.REJECTED);\r\n                })\r\n                .finally(() => window.scrollTo({\r\n                    top: document.documentElement.scrollHeight,\r\n                    behavior: \"smooth\",\r\n                }));\r\n            \r\n        };\r\n\r\n        fetchSearchQuery();\r\n        setStatus(Status.PENDING);\r\n\r\n    }, [searchQuery,page]);    \r\n\r\n\r\n\r\n    const handleFormSubmit = searchQuery => {\r\n        setSearchQuery(searchQuery);\r\n        setPage(1);\r\n        setSearchQueryResult([]);\r\n    };    \r\n\r\n    const toggleModal = () => {\r\n        setShowModal(!showModal);\r\n    };\r\n    \r\n    const handleImgURL = modalImgUrl => {\r\n        setModalImgUrl(modalImgUrl)\r\n    };\r\n\r\n    const handleImgClick = event => {\r\n        if (event.currentTarget === event.target) {\r\n            const largeImageURL = event.target.dataset.source;\r\n            handleImgURL(largeImageURL);\r\n            toggleModal();\r\n        };\r\n          \r\n    };\r\n    \r\n      const onLoadMore = () => {\r\n          setPage((prevState) => prevState + 1);\r\n  };\r\n    \r\n    return (\r\n            <div >\r\n                < Searchbar onSubmit={handleFormSubmit} />\r\n\r\n                {status === 'pending' && <Loader className={styles.Loader} type=\"Circles\" color=\"#3f51b5\" height={100} width={100} timeout={5000} />}\r\n\r\n                <div >\r\n                    {status === 'resolved' && searchQueryResult.length > 0 &&\r\n                        <div >\r\n                            <ul className={styles.ImageGallery}>\r\n                                {searchQueryResult.map(img => (\r\n                                    <ImageGalleryItem onClick={handleImgClick} key={img.id} img={img} />\r\n                                ))}\r\n                            </ul>\r\n\r\n                            {total > (page - 1) * 12 && (<Button onClick={onLoadMore} />)}\r\n               \r\n                            {showModal && <Modal onClose={toggleModal} url={modalImgUrl} />}\r\n\r\n                        </div>}\r\n                </div>\r\n                \r\n                {status === 'resolved' && !searchQueryResult.length &&\r\n                    <p className={styles.ErrorQuery}>No match found. Please check your query!</p>}\r\n                \r\n                {status === 'rejected' && <p className={styles.ErrorQuery}>{error.message}</p>}\r\n                           \r\n\r\n            </div>\r\n            \r\n        );\r\n        \r\n};\r\n\r\n\r\n\r\nexport default ImageGallery;","import React from 'react';\nimport ImageGallery from './ImageGallery'\n\n\n\nconst App = () => {\n    return (\n        < ImageGallery />\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__LBHuI\",\"ErrorQuery\":\"ImageGallery_ErrorQuery__12dmj\",\"Loader\":\"ImageGallery_Loader__1VuSq\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"Modal_Overlay__3wqoS\",\"Modal\":\"Modal_Modal__2fOfz\",\"Img\":\"Modal_Img__2cCyB\"};"],"sourceRoot":""}